<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>iCub-NIDAQmx: NIDAQmxReader</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">iCub-NIDAQmx
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NIDAQmxReader<div class="ingroups"><a class="el" href="group__icub__data__acquisition.html">General purpose data acquisition (DAQ) modules.</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>The NIDAQmxReader is a module which acquires data from a National Instruments data acquisition (DAQ) card and outputs it on two YARP ports.</p>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>This module relies on the NIDAQmxTask C++ wrapper for the National Instruments proprietary NIDAQmx library. It invokes the API methods defined in the NIDAQmxTask API to initialise, run, stop and clear DAQ tasks.</p>
<p>Below is a block diagram showing the architecture of a NIDAQmx system: </p>
<div class="image">
<img src="DAQSystemArch.png" alt="DAQSystemArch.png"/>
<div class="caption">
NIDAQmx System architecture.</div></div>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<p>The DAQ task configuration is fairly cumbersome and requires many parameters. The NIDAQmxReader therefore takes a mandatory configuration file <b>confNIDAQmxReader.ini</b> which must be placed in its context (NIDAQmxReader). The module will not run if the configuration file does not exist. This is because it would be impossible to define default parameters for the DAQ task. This file defines all the afore-mentioned parameters and can be modified to suit your needs.</p>
<h1><a class="anchor" id="calibmatrix_sec"></a>
Calibration Matrix and Scales</h1>
<p>Remember to update the <b>confNIDAQmxReader.ini</b> file with the calibration matrix and scale that belong to the sensor you are using. This calibration data is <b>unique</b> to each sensor. Acquiring data from a sensor configured using calibration data from another sensor will inevitably result into meaningless, wrong data.</p>
<h1><a class="anchor" id="sampling_sec"></a>
Sampling Explained</h1>
<p>The module launches a DAQ task with the given sampling rate <em>samplingRate</em>. Once started, the task fills a circular buffer of size <em>bufferSize</em> with the acquired samples. Every <em>period</em> seconds, the module reads a finite number of samples <em>samplesPerChannel</em> from the buffer thus freeing space for more samples to be acquired. If the buffer contains less than <em>samplesPerChannel</em> samples then all available samples are read. These samples are output on the respective YARP ports.</p>
<p>The module configuration therefore requires a fine tuning of the following parameters:</p>
<ul>
<li><em>period</em></li>
<li><em>samplingRate</em></li>
<li><em>samplesPerChannel</em></li>
</ul>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<p>The NIDAQmxReader depends on standard YARP libraries.</p>
<p>The module also depends on the NIDAQmxTask C++ wrapper for the NIDAQmx library.</p>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p><b>Command-line Parameters</b></p>
<ul>
<li><em>name</em>: The module name.</li>
<li><em>period</em>: The module period in seconds.</li>
<li><em>robot</em>: The robot on which the module will run.</li>
</ul>
<p><b>Configuration File Parameters </b></p>
<ul>
<li><em>name</em>: The module name.</li>
<li><em>period</em>: The module period in seconds.</li>
<li><em>robot</em>: The robot on which the module will run.</li>
<li><em>deviceName</em>: The DAQ device name.</li>
<li><em>taskName</em>: The DAQ task name.</li>
<li><em>channels</em>: The physical channels to sample.</li>
<li><em>channelType</em>: The physical channel type - (see <a href="http://zone.ni.com/reference/en-XX/help/370471W-01/TOC8.htm">http://zone.ni.com/reference/en-XX/help/370471W-01/TOC8.htm</a>).</li>
<li><em>terminalConfig</em>: The terminal configuration mode for each channel - (see <a href="http://zone.ni.com/reference/en-XX/help/370466V-01/measfunds/connectaisigs/">http://zone.ni.com/reference/en-XX/help/370466V-01/measfunds/connectaisigs/</a>).</li>
<li><em>minVals</em>: The minimum values to be read for each channel.</li>
<li><em>maxVals</em>: The maximum values to be read for each channel.</li>
<li><em>samplesPerChannel</em>: The number of samples to read per channel.</li>
<li><em>samplingRate</em>: The sampling rate in Hz.</li>
<li><em>timeout</em>: The sampling timeout in ms.</li>
<li><em>bufferSize</em>: The sampling buffer size.</li>
<li><em>scales</em>: The calibration scales.</li>
<li><em>calibMatrix</em>: The calibration matrix.</li>
</ul>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<p><b>Output ports </b> The NIDAQmxReader creates the following output ports:</p>
<ul>
<li>/NIDAQmxReader/data/analog:o [yarp::sig::Vector] [default carrier:tcp]: This port outputs the analog sensor values (Volts, Amps, etc).</li>
<li>/NIDAQmxReader/data/real:o [yarp::sig::Vector] [default carrier:tcp]: This port outputs the real sensor values (Newtons, Newton millimeters, etc).</li>
</ul>
<h1><a class="anchor" id="supported_daq_cards"></a>
Supported National Instruments DAQ cards</h1>
<p>This module supports all the DAQ cards which are supported by the installed NIDAQmx (or NIDAQmxBase) library. These are listed in the library Readme.</p>
<h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<p>Linux, Windows</p>
<dl class="section author"><dt>Author</dt><dd>Francesco Giovannini (<a href="#" onclick="location.href='mai'+'lto:'+'fra'+'nc'+'esc'+'o.'+'gio'+'va'+'nni'+'ni'+'@ii'+'t.'+'it'; return false;">franc<span style="display: none;">.nosp@m.</span>esco<span style="display: none;">.nosp@m.</span>.giov<span style="display: none;">.nosp@m.</span>anni<span style="display: none;">.nosp@m.</span>ni@ii<span style="display: none;">.nosp@m.</span>t.it</a>)</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd></dd></dl>
<p>Copyright (C) 2013 Francesco Giovannini, iCub Facility - Istituto Italiano di Tecnologia</p>
<p>CopyPolicy: Released under the terms of the GNU GPL v2.0.</p>
<p>This file can be edited at contrib/src/dataAcquisition/NIDAQmx/src/modules/include/NIDAQmxReaderModule.h. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 18 2014 09:48:21 for iCub-NIDAQmx by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
