# ###########################################################################
# Copyright: 2013 iCub Facility, Istituto Italiano di Tecnologia
# Author: Francesco Giovannini
# CopyPolicy: Released under the terms of the GNU GPL v2.0.
# ###########################################################################

# ###########################################################################
# ###########################################################################
# CMake FIND file for the proprietary NIDAQmx Windows library (NIDAQmx).
# 
# Try to find NIDAQmx
# Once done this will define
#   LIBNIDAQMX_FOUND - System has NIDAQmx
#   LIBNIDAQMX_INCLUDE_DIRS - The NIDAQmx include directories
#   LIBNIDAQMX_LIBRARIES - The libraries needed to use NIDAQmx
# ###########################################################################
# ###########################################################################

# ###########################################################################
# Find installed library using PkgConfig
find_package(PkgConfig)
pkg_check_modules(PC_LIBNIDAQMX REQUIRED LIBNIDAQMX)
set(LIBNIDAQMX_DEFINITIONS ${PC_LIBNIDAQMX_CFLAGS_OTHER})

if(PC_LIBNIDAQMX)
    MESSAGE(STATUS "NIDAQmx library found.")

    # Find include files
    find_path(LIBNIDAQMX_INCLUDE_DIR 
        NAMES include/NIDAQmx.h)

    # Find library files
    find_library(LIBNIDAQMX_LIBRARY 
        NAMES NIDAQmx)

    
    # Set variables
    if(LIBNIDAQMX_LIBRARIES AND LIBNIDAQMX_INCLUDE_DIRS)
        set(LIBNIDAQMX_LIBRARIES ${PC_LIBNIDAQMX_LIBRARY} CACHE PATH "NIDAQmx library")
        set(LIBNIDAQMX_INCLUDE_DIRS ${PC_LIBNIDAQMX_INCLUDE_DIR} CACHE STRING "NIDAQmx include directory")
    else(LIBNIDAQMX_LIBRARIES AND LIBNIDAQMX_INCLUDE_DIRS)
        MESSAGE(FATAL_ERROR "Could not find the NIDAQmx library.")
    endif(LIBNIDAQMX_LIBRARIES AND LIBNIDAQMX_INCLUDE_DIRS)

    # Handle the QUIETLY and REQUIRED arguments and set LIBNIDAQMX_FOUND to TRUE if all listed variables are TRUE
    include(FindPackageHandleStandardArgs)
    find_package_handle_standard_args(LIBNIDAQMX  DEFAULT_MSG
                                      LIBNIDAQMX_LIBRARY LIBNIDAQMX_INCLUDE_DIR)

elseif(PC_LIBNIDAQMX)
    MESSAGE(STATUS "Could not find the NIDAQmx library.")
endif(PC_LIBNIDAQMX)
# ###########################################################################

    
# ###########################################################################
# Mark as done
mark_as_advanced(LIBNIDAQMX_INCLUDE_DIR LIBNIDAQMX_LIBRARY)
# ###########################################################################
